<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Blagnac - Portail Citoyen</title>
    
    <script src='https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js'></script>
    <link href='https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css' rel='stylesheet' />
    
    <script src="https://unpkg.com/pmtiles@2.11.0/js/index.js"></script>

    <style>
        body { margin: 0; padding: 0; display: flex; height: 100vh; font-family: sans-serif; }
        
        /* SIDEBAR */
        #sidebar {
            width: 320px; background: white; z-index: 10; 
            display: flex; flex-direction: column;
            box-shadow: 2px 0 10px rgba(0,0,0,0.2);
        }
        .header { background: #1e293b; color: white; padding: 20px; }
        .header h1 { margin: 0; font-size: 1.2rem; }
        .content { padding: 20px; flex: 1; overflow-y: auto; }
        
        /* CARTE */
        #map { flex: 1; }
        
        /* Boutons de couches */
        .layer-btn {
            display: block; width: 100%; padding: 10px; margin-bottom: 10px;
            background: #f1f5f9; border: 1px solid #cbd5e1; border-radius: 4px;
            text-align: left; cursor: pointer; font-weight: bold;
        }
        .layer-btn:hover { background: #e2e8f0; }
        .layer-btn.active { background: #3b82f6; color: white; border-color: #2563eb; }
    </style>
</head>
<body>

<div id="sidebar">
    <div class="header">
        <h1>OPEN BLAGNAC</h1>
        <small>Donn√©es Ouvertes & Citoyennes</small>
    </div>
    <div class="content">
        <p>Bienvenue sur le prototype cartographique.</p>
        <hr>
        <p><strong>Couches disponibles :</strong></p>
        
        <button class="layer-btn active" onclick="alert('La couche B√¢timents est d√©j√† active par d√©faut !')">
            üè¢ B√¢timents 3D
        </button>
    </div>
</div>

<div id="map"></div>

<script>
    // 1. Configuration initiale
    const protocol = new pmtiles.Protocol();
    maplibregl.addProtocol("pmtiles", protocol.tile);

    // 2. Cr√©ation de la carte
    const map = new maplibregl.Map({
        container: 'map',
        // Style vectoriel gratuit (OpenMapTiles via MapTiler)
        // Note : Pour un vrai projet, cr√©ez un compte gratuit sur MapTiler.com pour avoir votre propre cl√©
        style: 'https://api.maptiler.com/maps/basic-v2/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL',
        center: [1.39, 43.634], // Centr√© sur Blagnac
        zoom: 14.5,
        pitch: 45, // Inclinaison pour la 3D
        bearing: -10, // L√©g√®re rotation
        hash: true // Ajoute les coords dans l'URL (pratique pour partager)
    });

    // Contr√¥les de navigation (+/- et boussole)
    map.addControl(new maplibregl.NavigationControl());

    map.on('load', () => {
        console.log("Carte charg√©e ! Pr√™te √† recevoir les donn√©es de Blagnac.");
        
        // Ici, nous ajouterons le code pour charger vos fichiers PMTiles
        // dans la prochaine √©tape.
    });
</script>

</body>
</html>
